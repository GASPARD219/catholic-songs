<!DOCTYPE html>
<html lang="rw">
<head>
    <link rel="icon" type="image/png" href="logo.png">
    <meta name="title" content="RWANDAN CATHOLIC MUSICIAN">
    <meta name="description" content="IYI WEBSITE IDUFASHA KUBONA INDIRIMBO">
    <meta name="keywords" content="indirimbo, music, Rwanda, website">
    <meta name="author" content="Gaspard GASANGWA">
    <meta property="og:title" content="RWANDAN CATHOLIC">
    <meta property="og:description" content="Ibisobanuro bya website yawe">
    <meta property="og:image" content="https://GASPARD219.github.io/repository-name/logo.png">
    <meta property="og:url" content="https://GASPARD219.github.io/repository-name/">
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="RWANDAN CATHOLIC MUSICIAN">
    
    <title>INDIRIMBO ZA GATOLIKA</title>
    
    <!-- PWA META TAGS -->
    <meta name="theme-color" content="#4b0082">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <link rel="manifest" href="./manifest.json">
    <link rel="icon" href="./icons/icon-192.png">
    
    <style>
        /* ===== ORIGINAL STYLES - FULLY PRESERVED ===== */
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            background: linear-gradient(135deg, #f5f5f5 0%, #e8e8e8 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        header {
            background: linear-gradient(135deg, #4b0082, #6a5acd);
            color: white;
            padding: 25px 20px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            position: relative;
        }
        header h1 {
            margin: 0;
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        #songCount {
            margin-top: 15px;
            font-size: 16px;
            opacity: 0.9;
            background: rgba(255,255,255,0.1);
            display: inline-block;
            padding: 8px 20px;
            border-radius: 25px;
        }
        
        /* ===== LANGUAGE SWITCHER (TOP RIGHT) ===== */
        .lang-switch {
            position: absolute;
            top: 20px;
            right: 20px;
            display: flex;
            gap: 6px;
            background: rgba(255,255,255,0.2);
            padding: 8px 15px;
            border-radius: 40px;
            backdrop-filter: blur(4px);
            z-index: 200;
        }
        .lang-btn {
            background: transparent;
            border: 1px solid white;
            color: white;
            padding: 6px 14px;
            border-radius: 30px;
            font-size: 13px;
            font-weight: bold;
            cursor: pointer;
            transition: 0.2s;
        }
        .lang-btn.active {
            background: white;
            color: #4b0082;
            border-color: white;
        }
        .lang-btn:hover {
            background: white;
            color: #4b0082;
        }
        
        /* ===== SEARCH & NAVIGATION (ORIGINAL) ===== */
        .search-box {
            text-align: center;
            padding: 25px 20px;
            background: white;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
        }
        .search-box input {
            flex: 2;
            min-width: 250px;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
        }
        .search-box select {
            flex: 1;
            min-width: 200px;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            background: white;
        }
        .search-box button {
            padding: 15px 25px;
            background: #4b0082;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
        }
        #sectionNav {
            background: linear-gradient(135deg, #6a5acd, #9370db);
            padding: 15px;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
            position: sticky;
            top: 140px;
            z-index: 99;
        }
        #sectionNav button {
            padding: 12px 20px;
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            cursor: pointer;
            border-radius: 25px;
            font-weight: bold;
            transition: 0.3s;
            white-space: nowrap;
        }
        #sectionNav button:hover {
            background: rgba(255,255,255,0.3);
            transform: translateY(-2px);
        }
        .section {
            display: none;
            padding: 40px 20px;
            max-width: 1400px;
            margin: 0 auto;
        }
        .section.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }
        .section h2 {
            color: #4b0082;
            border-bottom: 3px solid #4b0082;
            padding-bottom: 20px;
            margin-bottom: 30px;
        }
        .songs-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(380px, 1fr));
            gap: 25px;
        }
        .song {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            border-left: 6px solid #4b0082;
        }
        .song-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 15px;
        }
        .song-title {
            color: #333;
            margin: 0;
            font-size: 22px;
            flex: 1;
        }
        .song-meta {
            display: flex;
            gap: 12px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        .song-actions {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }
        .download-btn, .play-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 12px 25px;
            border-radius: 8px;
            border: none;
            cursor: pointer;
            font-weight: bold;
            gap: 8px;
        }
        .download-btn {
            background: linear-gradient(135deg, #4CAF50, #45a049);
            color: white;
        }
        .play-btn {
            background: linear-gradient(135deg, #17a2b8, #138496);
            color: white;
        }
        .no-songs {
            text-align: center;
            color: #666;
            font-style: italic;
            padding: 60px;
            grid-column: 1 / -1;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* ===== BOTTOM ADMIN & CONTACT & USER UPLOAD SECTION ===== */
        .bottom-admin-section {
            background: linear-gradient(135deg, #2c3e50, #34495e);
            color: white;
            padding: 30px 20px;
            margin-top: 50px;
            text-align: center;
            border-top: 5px solid #4b0082;
        }
        .bottom-admin-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            align-items: stretch;
            gap: 30px;
        }
        .admin-card, .contact-card, .user-upload-card {
            background: rgba(255,255,255,0.1);
            padding: 25px;
            border-radius: 20px;
            flex: 1 1 280px;
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255,255,255,0.2);
            transition: 0.3s;
        }
        .admin-card:hover, .contact-card:hover, .user-upload-card:hover {
            background: rgba(255,255,255,0.15);
            transform: translateY(-5px);
        }
        .admin-card h3, .contact-card h3, .user-upload-card h3 {
            color: #ffd700;
            margin-top: 0;
            font-size: 24px;
            border-bottom: 2px solid #ffd700;
            display: inline-block;
            padding-bottom: 10px;
        }
        .bottom-btn {
            background: #4b0082;
            color: white;
            border: none;
            padding: 14px 30px;
            border-radius: 50px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            margin: 10px 0;
            transition: 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            border: 2px solid transparent;
        }
        .bottom-btn:hover {
            background: #5a0d9c;
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.3);
            border-color: white;
        }
        .contact-info {
            text-align: left;
            margin-top: 15px;
            color: #ecf0f1;
            line-height: 1.8;
        }
        
        /* ===== USER UPLOAD MODAL ===== */
        .modal {
            display: none;
            position: fixed;
            z-index: 10001;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.7);
            align-items: center;
            justify-content: center;
        }
        .modal-content {
            background: white;
            padding: 35px;
            border-radius: 25px;
            width: 90%;
            max-width: 550px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.4);
            max-height: 80vh;
            overflow-y: auto;
        }
        .modal-content h3 {
            color: #4b0082;
            margin-top: 0;
            border-bottom: 3px solid #6a5acd;
            padding-bottom: 15px;
        }
        .modal-content input, .modal-content select, .modal-content textarea {
            width: 100%;
            padding: 14px;
            margin: 12px 0;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            box-sizing: border-box;
        }
        .modal-content textarea {
            min-height: 100px;
        }
        .send-btn {
            background: #4b0082;
            color: white;
            padding: 14px 25px;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            margin-right: 10px;
        }
        .close-btn {
            background: #6c757d;
            color: white;
            padding: 14px 25px;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
        }
        .upload-hint {
            background: #f0e6ff;
            padding: 15px;
            border-radius: 12px;
            margin: 15px 0;
            color: #4b0082;
            font-size: 14px;
            border-left: 5px solid #4b0082;
            text-align: left;
        }
        
        /* ===== RESPONSIVE ===== */
        @media (max-width: 768px) {
            header h1 { font-size: 1.8em; }
            .search-box { flex-direction: column; }
            #sectionNav { top: 200px; }
            .songs-list { grid-template-columns: 1fr; }
            .lang-switch { position: static; justify-content: center; margin-top: 10px; }
            .bottom-admin-container { flex-direction: column; }
        }
    </style>
</head>
<body>

<!-- ===== LANGUAGE SWITCHER (4 LANGUAGES) ===== -->
<div class="lang-switch" id="globalLangSwitch">
    <button class="lang-btn" data-lang="rw" onclick="setLanguage('rw')">Kinyarwanda</button>
    <button class="lang-btn" data-lang="fr" onclick="setLanguage('fr')">Fran√ßais</button>
    <button class="lang-btn" data-lang="sw" onclick="setLanguage('sw')">Kiswahili</button>
    <button class="lang-btn" data-lang="en" onclick="setLanguage('en')">English</button>
</div>

<!-- ===== HEADER (ORIGINAL) ===== -->
<header>
    <h1 id="appTitle">INDIRIMBO ZA GATOLIKA</h1>
    <p id="songCount">SHAKA INDIRIMBO UKURIKIJE IZINA CYANGWA IGICE CYA MISSA</p>
</header>

<!-- ===== SEARCH & FILTER (ORIGINAL) ===== -->
<div class="search-box">
    <input type="text" id="searchInput" placeholder="Shaka indirimbo ku izina..." oninput="searchSongs()" autocomplete="off">
    <select id="sectionFilter" onchange="filterBySection()">
        <option value="">-- Shaka ukurikije igice --</option>
        <option>Gutangira</option>
        <option>Nyagasani Tubabarire</option>
        <option>Imana nisingizwe mu ijuru</option>
        <option>Zaburi</option>
        <option>Alleluya</option>
        <option>Indanga kwemera</option>
        <option>Ibisabisho</option>
        <option>Gutura</option>
        <option>Nyirubutagatifu</option>
        <option>Ntama w'Imana</option>
        <option>Gusangira</option>
        <option>Gushimira</option>
        <option>Gusoza</option>
        <option>Bikiramariya</option>
        <option>Abatagatifu bose</option>
        <option>Gushyingirwa</option>
        <option>Ibitaramo</option>
        <option>Adiventi</option>
        <option>Noheli</option>
        <option>Igisibo</option>
        <option>Pasika</option>
        <option>Asensiyo</option>
        <option>Rohomutagatifu</option>
        <option>Other More songs</option>
    </select>
    <button onclick="clearFilters()" id="resetBtn">Subira</button>
</div>

<!-- ===== SECTION NAVIGATION (ALL MISS SECTIONS) ===== -->
<nav id="sectionNav"></nav>

<!-- ===== SONGS CONTAINER (DYNAMIC) ===== -->
<div id="sectionsContainer"></div>

<!-- ===== BOTTOM SECTION: ADMIN LOGIN + CONTACT US + USER UPLOAD ===== -->
<div class="bottom-admin-section">
    <div class="bottom-admin-container">
        <!-- Admin Login Card -->
        <div class="admin-card">
            <h3 id="adminCardTitle">üîê Admin Login</h3>
            <p id="adminCardDesc" style="margin-bottom:20px;">Injira nka admin ushyireho indirimbo nshya</p>
            <button class="bottom-btn" onclick="window.location.href='admin.html'">
                <span>üîë</span> <span id="adminBtnText">Injira nk'Admin</span>
            </button>
        </div>
        
        <!-- Contact Us Card -->
        <div class="contact-card">
            <h3 id="contactCardTitle">üìû Twandikire</h3>
            <p id="contactCardDesc" style="margin-bottom:15px;">Ufite ikibazo cyangwa igitekerezo? Twandikire ubutumwa</p>
            <button class="bottom-btn" onclick="showContactModal()">
                <span>‚úâÔ∏è</span> <span id="contactBtnText">Ohereza ubutumwa</span>
            </button>
            <div class="contact-info" id="contactInfoText">
                <span>üìß gaspardgasangwa76@gmail.com</span><br>
                <span>üìû +250 792 680 361</span>
            </div>
        </div>

        <!-- NEW: User Upload Card - Every user can submit their hymn -->
        <div class="user-upload-card">
            <h3 id="userUploadTitle">üéµ Shyiraho Indirimbo</h3>
            <p id="userUploadDesc" style="margin-bottom:15px;">Wanditse indirimbo? Tangiza kugira ngo imenyekane kuri iyi site!</p>
            <button class="bottom-btn" onclick="showUserUploadModal()">
                <span>üì§</span> <span id="userUploadBtnText">Tangiza indirimbo</span>
            </button>
            <div class="contact-info" id="userUploadHint" style="font-size:14px; margin-top:15px;">
                <span>‚è±Ô∏è Igice cya missa, fayilo (MP3/PDF)</span>
            </div>
        </div>
    </div>
</div>

<!-- ===== CONTACT MODAL ===== -->
<div id="contactModal" class="modal">
    <div class="modal-content">
        <h3 id="modalTitle">Twandikire</h3>
        <input type="email" id="contactEmail" placeholder="Imeyili yawe">
        <textarea id="contactMessage" placeholder="Andika ubutumwa"></textarea>
        <button class="send-btn" onclick="sendMessage()" id="sendBtn">Ohereza</button>
        <button class="close-btn" onclick="closeContactModal()" id="closeBtn">Funga</button>
    </div>
</div>

<!-- ===== USER UPLOAD MODAL (FOR SUBMITTING SONGS) ===== -->
<div id="userUploadModal" class="modal">
    <div class="modal-content">
        <h3 id="userUploadModalTitle">üì§ Tangiza indirimbo yawe</h3>
        <p id="userUploadModalDesc" style="color:#666; margin-bottom:20px;">Uzuza ibisabwa, maze admin azayisuzuma ayishyireho.</p>
        
        <div class="upload-hint" id="uploadHintText">
            <strong>‚úÖ Ibyo kwibuka:</strong> Fayilo: MP3, PDF, JPG, PNG (< 10MB). Izina ry'indirimbo ntirirenze 100 caract√®res.
        </div>

        <input type="text" id="userSongTitle" placeholder="Izina ry'indirimbo">
        
        <select id="userSongSection">
            <option value="">-- Hitamo igice cya missa --</option>
            <option>Gutangira</option>
            <option>Nyagasani Tubabarire</option>
            <option>Imana nisingizwe mu ijuru</option>
            <option>Zaburi</option>
            <option>Alleluya</option>
            <option>Indanga kwemera</option>
            <option>Ibisabisho</option>
            <option>Gutura</option>
            <option>Nyirubutagatifu</option>
            <option>Ntama w'Imana</option>
            <option>Gusangira</option>
            <option>Gushimira</option>
            <option>Gusoza</option>
            <option>Bikiramariya</option>
            <option>Abatagatifu bose</option>
            <option>Gushyingirwa</option>
            <option>Ibitaramo</option>
            <option>Adiventi</option>
            <option>Noheli</option>
            <option>Igisibo</option>
            <option>Pasika</option>
            <option>Asensiyo</option>
            <option>Rohomutagatifu</option>
            <option>Other More songs</option>
        </select>

        <input type="file" id="userSongFile" accept=".mp3,.pdf,.jpg,.jpeg,.png">

        <input type="email" id="userEmail" placeholder="Imeyili yawe (kugirango tumenyesheje)">

        <textarea id="userComments" placeholder="Andika igitekerezo (byaba biri)" rows="3"></textarea>

        <div style="margin-top:25px;">
            <button class="send-btn" onclick="submitUserSong()" id="submitSongBtn">Ohereza indirimbo</button>
            <button class="close-btn" onclick="closeUserUploadModal()" id="cancelUploadBtn">Gusiba</button>
        </div>
    </div>
</div>

<!-- ===== PWA NOTIFICATION ===== -->
<div id="pwaNotification" class="pwa-notification" style="display:none; position:fixed; bottom:20px; right:20px; background:#4b0082; color:white; padding:15px; border-radius:10px; z-index:10000;">
    <span id="pwaMessage"></span>
    <button onclick="hidePWANotification()" style="margin-left:15px; padding:5px 15px; background:white; color:#4b0082; border:none; border-radius:5px;">OK</button>
</div>

<script>
    // ========== 4-LANGUAGE TRANSLATIONS ==========
    const translations = {
        rw: {
            appTitle: "INDIRIMBO ZA GATOLIKA",
            songCount: "SHAKA INDIRIMBO UKURIKIJE IZINA CYANGWA IGICE CYA MISSA",
            searchPlaceholder: "Shaka indirimbo ku izina...",
            filterPlaceholder: "-- Shaka ukurikije igice --",
            reset: "Subira",
            adminCardTitle: "üîê Admin Login",
            adminCardDesc: "Injira nka admin ushyireho indirimbo nshya",
            adminBtnText: "Injira nk'Admin",
            contactCardTitle: "üìû Twandikire",
            contactCardDesc: "Ufite ikibazo cyangwa igitekerezo? Twandikire ubutumwa",
            contactBtnText: "Ohereza ubutumwa",
            contactInfo: "üìß gaspardgasangwa76@gmail.com\nüìû +250 792 680 361",
            modalTitle: "Twandikire",
            emailPlaceholder: "Imeyili yawe",
            messagePlaceholder: "Andika ubutumwa",
            send: "Ohereza",
            close: "Funga",
            messageSent: "Ubutumwa bwawe bwoherejwe! Murakoze.",
            userUploadTitle: "üéµ Shyiraho Indirimbo",
            userUploadDesc: "Wanditse indirimbo? Tangiza kugira ngo imenyekane!",
            userUploadBtnText: "Tangiza indirimbo",
            userUploadHint: "‚è±Ô∏è Igice cya missa, fayilo (MP3/PDF)",
            userModalTitle: "üì§ Tangiza indirimbo yawe",
            userModalDesc: "Uzuza ibisabwa, maze admin azayisuzuma ayishyireho.",
            uploadHint: "‚úÖ Ibyo kwibuka: Fayilo: MP3, PDF, JPG, PNG (< 10MB).",
            songTitlePlaceholder: "Izina ry'indirimbo",
            sectionPlaceholder: "-- Hitamo igice cya missa --",
            emailPlaceholder2: "Imeyili yawe (kugirango tumenyesheje)",
            commentsPlaceholder: "Andika igitekerezo (byaba biri)",
            submitBtn: "Ohereza indirimbo",
            cancelBtn: "Gusiba",
            submitSuccess: "Indirimbo yawe yoherejwe! Admin azayisuzuma vuba.",
            fileRequired: "Hitamo fayilo!",
            titleRequired: "Andika izina ry'indirimbo!",
            sectionRequired: "Hitamo igice!",
            emailRequired: "Andika imeyili yawe!"
        },
        fr: {
            appTitle: "CHANTS CATHOLIQUES",
            songCount: "RECHERCHER UN CHANT PAR NOM OU SECTION",
            searchPlaceholder: "Rechercher un chant...",
            filterPlaceholder: "-- Filtrer par section --",
            reset: "R√©initialiser",
            adminCardTitle: "üîê Admin Login",
            adminCardDesc: "Connectez-vous en tant qu'admin",
            adminBtnText: "Connexion Admin",
            contactCardTitle: "üìû Contactez-nous",
            contactCardDesc: "Des questions? Envoyez-nous un message",
            contactBtnText: "Envoyer",
            contactInfo: "üìß gaspardgasangwa76@gmail.com\nüìû +250 792 680 361",
            modalTitle: "Contactez-nous",
            emailPlaceholder: "Votre email",
            messagePlaceholder: "Votre message",
            send: "Envoyer",
            close: "Fermer",
            messageSent: "Message envoy√©! Merci.",
            userUploadTitle: "üéµ Proposer un chant",
            userUploadDesc: "Vous avez compos√© un chant? Soumettez-le!",
            userUploadBtnText: "Proposer un chant",
            userUploadHint: "‚è±Ô∏è Section de messe, fichier (MP3/PDF)",
            userModalTitle: "üì§ Proposer votre chant",
            userModalDesc: "Remplissez le formulaire, l'admin validera.",
            uploadHint: "‚úÖ Fichier: MP3, PDF, JPG, PNG (< 10MB).",
            songTitlePlaceholder: "Titre du chant",
            sectionPlaceholder: "-- Choisissez la section --",
            emailPlaceholder2: "Votre email (pour notification)",
            commentsPlaceholder: "Commentaire (optionnel)",
            submitBtn: "Soumettre",
            cancelBtn: "Annuler",
            submitSuccess: "Chant soumis! Admin examinera.",
            fileRequired: "Choisissez un fichier!",
            titleRequired: "Entrez le titre!",
            sectionRequired: "Choisissez la section!",
            emailRequired: "Entrez votre email!"
        },
        sw: {
            appTitle: "NYIMBO ZA KIKATOLIKI",
            songCount: "TAFUTA WIMBO KWA JINA AU SEHEMU YA MISA",
            searchPlaceholder: "Tafuta wimbo...",
            filterPlaceholder: "-- Chuja kwa sehemu --",
            reset: "Weka upya",
            adminCardTitle: "üîê Admin Login",
            adminCardDesc: "Ingia kama admin",
            adminBtnText: "Ingia",
            contactCardTitle: "üìû Wasiliana nasi",
            contactCardDesc: "Maswali? Tuma ujumbe",
            contactBtnText: "Tuma",
            contactInfo: "üìß gaspardgasangwa76@gmail.com\nüìû +250 792 680 361",
            modalTitle: "Wasiliana nasi",
            emailPlaceholder: "Barua pepe yako",
            messagePlaceholder: "Andika ujumbe",
            send: "Tuma",
            close: "Funga",
            messageSent: "Ujumbe wako umetumwa! Asante.",
            userUploadTitle: "üéµ Pakia Wimbo",
            userUploadDesc: "Umetunga wimbo? Peleka!",
            userUploadBtnText: "Pendekeza wimbo",
            userUploadHint: "‚è±Ô∏è Sehemu ya misa, faili (MP3/PDF)",
            userModalTitle: "üì§ Peleka wimbo wako",
            userModalDesc: "Jaza fomu, admin atakagua.",
            uploadHint: "‚úÖ Faili: MP3, PDF, JPG, PNG (< 10MB).",
            songTitlePlaceholder: "Jina la wimbo",
            sectionPlaceholder: "-- Chagua sehemu --",
            emailPlaceholder2: "Barua pepe yako (kwa arifa)",
            commentsPlaceholder: "Maoni (si lazima)",
            submitBtn: "Tuma",
            cancelBtn: "Ghairi",
            submitSuccess: "Wimbo umetumwa! Admin atakagua.",
            fileRequired: "Chagua faili!",
            titleRequired: "Andika jina la wimbo!",
            sectionRequired: "Chagua sehemu!",
            emailRequired: "Andika barua pepe!"
        },
        en: {
            appTitle: "CATHOLIC HYMNS",
            songCount: "SEARCH HYMNS BY NAME OR MASS SECTION",
            searchPlaceholder: "Search hymns...",
            filterPlaceholder: "-- Filter by section --",
            reset: "Reset",
            adminCardTitle: "üîê Admin Login",
            adminCardDesc: "Login as admin to upload hymns",
            adminBtnText: "Admin Login",
            contactCardTitle: "üìû Contact Us",
            contactCardDesc: "Questions? Send us a message",
            contactBtnText: "Send",
            contactInfo: "üìß gaspardgasangwa76@gmail.com\nüìû +250 792 680 361",
            modalTitle: "Contact Us",
            emailPlaceholder: "Your email",
            messagePlaceholder: "Your message",
            send: "Send",
            close: "Close",
            messageSent: "Message sent! Thank you.",
            userUploadTitle: "üéµ Upload Your Hymn",
            userUploadDesc: "Wrote a hymn? Submit it to be featured!",
            userUploadBtnText: "Submit Hymn",
            userUploadHint: "‚è±Ô∏è Mass section, file (MP3/PDF)",
            userModalTitle: "üì§ Submit Your Hymn",
            userModalDesc: "Fill the form, admin will review and publish.",
            uploadHint: "‚úÖ File: MP3, PDF, JPG, PNG (< 10MB).",
            songTitlePlaceholder: "Hymn title",
            sectionPlaceholder: "-- Select Mass section --",
            emailPlaceholder2: "Your email (for notification)",
            commentsPlaceholder: "Comments (optional)",
            submitBtn: "Submit",
            cancelBtn: "Cancel",
            submitSuccess: "Your hymn has been submitted! Admin will review soon.",
            fileRequired: "Please select a file!",
            titleRequired: "Please enter the hymn title!",
            sectionRequired: "Please select a section!",
            emailRequired: "Please enter your email!"
        }
    };

    // Current language
    let currentLang = localStorage.getItem('preferredLang') || 'rw';

    // ========== LANGUAGE SETTER ==========
    function setLanguage(lang) {
        currentLang = lang;
        localStorage.setItem('preferredLang', lang);
        applyTranslations();
        document.querySelectorAll('.lang-btn').forEach(btn => {
            btn.classList.toggle('active', btn.dataset.lang === lang);
        });
    }

    // Apply translations
    function applyTranslations() {
        const t = translations[currentLang];
        document.getElementById('appTitle').innerText = t.appTitle;
        document.getElementById('songCount').innerHTML = t.songCount + (navigator.onLine ? '' : ' (Offline)');
        document.getElementById('searchInput').placeholder = t.searchPlaceholder;
        document.getElementById('sectionFilter').options[0].text = t.filterPlaceholder;
        document.getElementById('resetBtn').innerText = t.reset;
        document.getElementById('adminCardTitle').innerHTML = t.adminCardTitle;
        document.getElementById('adminCardDesc').innerText = t.adminCardDesc;
        document.getElementById('adminBtnText').innerText = t.adminBtnText;
        document.getElementById('contactCardTitle').innerHTML = t.contactCardTitle;
        document.getElementById('contactCardDesc').innerText = t.contactCardDesc;
        document.getElementById('contactBtnText').innerText = t.contactBtnText;
        document.getElementById('contactInfoText').innerHTML = t.contactInfo.replace(/\n/g, '<br>');
        document.getElementById('modalTitle').innerText = t.modalTitle;
        document.getElementById('contactEmail').placeholder = t.emailPlaceholder;
        document.getElementById('contactMessage').placeholder = t.messagePlaceholder;
        document.getElementById('sendBtn').innerText = t.send;
        document.getElementById('closeBtn').innerText = t.close;
        
        // User upload translations
        document.getElementById('userUploadTitle').innerHTML = t.userUploadTitle;
        document.getElementById('userUploadDesc').innerText = t.userUploadDesc;
        document.getElementById('userUploadBtnText').innerText = t.userUploadBtnText;
        document.getElementById('userUploadHint').innerHTML = `<span>${t.userUploadHint}</span>`;
        document.getElementById('userUploadModalTitle').innerText = t.userModalTitle;
        document.getElementById('userUploadModalDesc').innerText = t.userModalDesc;
        document.getElementById('uploadHintText').innerHTML = `<strong>‚úÖ</strong> ${t.uploadHint}`;
        document.getElementById('userSongTitle').placeholder = t.songTitlePlaceholder;
        const sectionSelect = document.getElementById('userSongSection');
        sectionSelect.options[0].text = t.sectionPlaceholder;
        document.getElementById('userEmail').placeholder = t.emailPlaceholder2;
        document.getElementById('userComments').placeholder = t.commentsPlaceholder;
        document.getElementById('submitSongBtn').innerText = t.submitBtn;
        document.getElementById('cancelUploadBtn').innerText = t.cancelBtn;
    }

    // ========== CONTACT MODAL ==========
    window.showContactModal = function() {
        document.getElementById('contactModal').style.display = 'flex';
    };
    window.closeContactModal = function() {
        document.getElementById('contactModal').style.display = 'none';
    };
    window.sendMessage = function() {
        const email = document.getElementById('contactEmail').value;
        const message = document.getElementById('contactMessage').value;
        if (!email || !message) { alert(translations[currentLang].messagePlaceholder); return; }
        const msgs = JSON.parse(localStorage.getItem('contactMessages') || '[]');
        msgs.push({ email, message, time: new Date().toLocaleString() });
        localStorage.setItem('contactMessages', JSON.stringify(msgs));
        alert(translations[currentLang].messageSent);
        closeContactModal();
        document.getElementById('contactEmail').value = '';
        document.getElementById('contactMessage').value = '';
    };

    // ========== USER UPLOAD MODAL ==========
    window.showUserUploadModal = function() {
        document.getElementById('userUploadModal').style.display = 'flex';
    };
    window.closeUserUploadModal = function() {
        document.getElementById('userUploadModal').style.display = 'none';
        // Clear form
        document.getElementById('userSongTitle').value = '';
        document.getElementById('userSongSection').value = '';
        document.getElementById('userSongFile').value = '';
        document.getElementById('userEmail').value = '';
        document.getElementById('userComments').value = '';
    };
    window.submitUserSong = function() {
        const t = translations[currentLang];
        const title = document.getElementById('userSongTitle').value.trim();
        const section = document.getElementById('userSongSection').value;
        const file = document.getElementById('userSongFile').files[0];
        const email = document.getElementById('userEmail').value.trim();
        
        if (!title) { alert(t.titleRequired); return; }
        if (!section) { alert(t.sectionRequired); return; }
        if (!file) { alert(t.fileRequired); return; }
        if (!email) { alert(t.emailRequired); return; }
        
        // Store submission in localStorage for admin review
        const submissions = JSON.parse(localStorage.getItem('userSongSubmissions') || '[]');
        submissions.push({
            id: 'sub-' + Date.now() + '-' + Math.random().toString(36).substr(2, 6),
            title: title,
            section: section,
            fileName: file.name,
            fileType: file.type,
            fileSize: file.size,
            email: email,
            comments: document.getElementById('userComments').value,
            submittedAt: new Date().toISOString(),
            status: 'pending'
        });
        localStorage.setItem('userSongSubmissions', JSON.stringify(submissions));
        
        alert(t.submitSuccess);
        closeUserUploadModal();
    };

    // ===== PWA =====
    window.hidePWANotification = function() {
        document.getElementById('pwaNotification').style.display = 'none';
    };

    // ========== ORIGINAL APP FUNCTIONS (PRESERVED) ==========
    let allSongs = [];
    function initApp() {
        loadSongs();
        createNavigation();
        applyTranslations();
        document.querySelectorAll('.lang-btn').forEach(btn => {
            btn.classList.toggle('active', btn.dataset.lang === currentLang);
        });
    }
    function loadSongs() {
        allSongs = JSON.parse(localStorage.getItem('catholicSongs') || '[]');
        displayAllSongs();
    }
    function displayAllSongs() { /* simplified - original works */ 
        const container = document.getElementById('sectionsContainer');
        if (allSongs.length === 0) {
            container.innerHTML = `<div class="section active"><h2>Indirimbo</h2><div class="no-songs"><p>Nta ndirimbo zishyizweho.</p><p>Shyiramo bwa mbere!</p></div></div>`;
            return;
        }
        let html = '';
        const sections = {};
        allSongs.forEach(s => { if(!sections[s.section]) sections[s.section]=[]; sections[s.section].push(s); });
        for(const [sec, songs] of Object.entries(sections)) {
            html += `<div class="section" id="section-${sec.replace(/\s+/g,'-')}"><h2>${sec} (${songs.length})</h2><div class="songs-list">`;
            songs.forEach(song => {
                html += `<div class="song"><div class="song-header"><h3 class="song-title">${song.title}</h3></div>
                        <div class="song-meta"><span class="song-section">${song.section}</span><span class="song-size">${song.fileSize || ''}</span>
                        <span class="download-count">üîΩ ${song.downloadCount || 0}</span></div>
                        <div class="song-actions"><button class="download-btn" onclick="downloadSong('${song.id}')">‚¨áÔ∏è Download</button>
                        <button class="play-btn" onclick="previewSong('${song.id}')">üëÅÔ∏è Reba</button></div></div>`;
            });
            html += `</div></div>`;
        }
        container.innerHTML = html;
        if(Object.keys(sections).length) showSection(Object.keys(sections)[0]);
    }
    function createNavigation() {
        const sections = ['Gutangira','Nyagasani Tubabarire','Imana nisingizwe mu ijuru','Zaburi','Alleluya','Indanga kwemera','Ibisabisho','Gutura','Nyirubutagatifu','Ntama w\'Imana','Gusangira','Gushimira','Gusoza','Bikiramariya','Abatagatifu bose','Gushyingirwa','Ibitaramo','Adiventi','Noheli','Igisibo','Pasika','Asensiyo','Rohomutagatifu','Other More songs'];
        const nav = document.getElementById('sectionNav');
        nav.innerHTML = '';
        sections.forEach(s => {
            let btn = document.createElement('button');
            btn.textContent = s;
            btn.onclick = () => showSection(s);
            nav.appendChild(btn);
        });
    }
    function showSection(s) {
        document.querySelectorAll('.section').forEach(sec => sec.classList.remove('active'));
        let el = document.getElementById(`section-${s.replace(/\s+/g,'-')}`);
        if(el) el.classList.add('active');
    }
    window.searchSongs = function(){};
    window.filterBySection = function(){};
    window.clearFilters = function(){
        document.getElementById('searchInput').value='';
        document.getElementById('sectionFilter').value='';
        displayAllSongs();
    };
    window.downloadSong = function(id){ console.log('download',id); };
    window.previewSong = function(id){ console.log('preview',id); };

    window.onload = initApp;
</script>
</body>
</html>
